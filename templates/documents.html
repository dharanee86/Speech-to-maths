{% extends "base.html" %}
{% load static %}

{% block title %} Documents {% endblock %}
{% block head %} 
{% endblock %}
{% block content %} 
<div class = "top-bar">	
	<h3> 
		<i class="fa fa-list" aria-hidden="true"> </i> &nbsp;
		Documents 
	</h3>
	<i class="fa fa-search" aria-hidden="true"></i>
	<input type = "search" name = "search_docs" placeholder = "Recherche" onkeypress="setTimeout(searchDocuments, 0)">
	<span class = "to-the-right">
		<form id = "_delete" style = "visibility: hidden;" method = "POST"><!---->
			{% csrf_token %}
			<button type="submit"> 
				<i class="fa fa-trash" aria-hidden="true"></i> &nbsp;
				Supprimer
				<input type = "hidden" value = "" id = "_delete-value" name = 'delete-value'>
			</button> 
		</form>	&nbsp;
		<form action = "{% url "add_doc" %}"><!---->
			<button type="submit"> 
				<i class="fa fa-file" aria-hidden="true"></i> &nbsp;
				Nouveau document 
			</button> 
		</form>
	</span>
</div>

<div class = "top-bar-filler"> 
	<button type="submit"> 
		<i class="fa fa-file-o" aria-hidden="true"></i> &nbsp;
	</button>
</div>

<table class = "docs-table">

{% if docs %}
	<tr>
		<th onclick = "orderLines(0)"> Titre &nbsp;</th> 
		<th onclick = "orderLines(1)"> <i class="fa fa-user" aria-hidden="true"></i> &nbsp;  Auteur &nbsp; </th> 				
		<th onclick = "orderLines(2)"> <i class="fa fa-calendar-o" aria-hidden="true"></i> &nbsp; Derni√®re modification &nbsp; </th>
	</tr>
{% endif %}

{% for doc in docs %}
	<tr class = "_document" id = "{{ doc.id }}" onclick = "select({{ doc.id }});" ondblclick='window.open("{% url "document" doc.id %}", "_self")'>
		<td> 
			<a href = "{% url "document" doc.id %}"> 
				<i class="fa fa-file-o" aria-hidden="true"></i> &nbsp;
				{{ doc.titre }} 
			</a> 
		</td>
		<td> 
			{{ doc.auteur }}
		</td>
		<td> 
			<time> {{ doc.date_derniere_modification }} </time>
			<input type = "hidden" value = "{{ doc.date_derniere_modification|date:'Y m d'}}">
	</tr>

{% empty %}
	<tr> 
		<td> 
			<i class="fa fa-info-circle" aria-hidden="true"> </i> &nbsp; Aucun document
		</td>
	</tr>

{% endfor %}

</table>

<script> 
	var documents_search_link = "{% url 'documents_search' %}"
</script>
<script src = "{% static 'js/documents.js' %}"> </script>

{% endblock %}